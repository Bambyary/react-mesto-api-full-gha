{"ast":null,"code":"import _classCallCheck from\"D:/react-mesto-api-full-gha/frontend/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";import _createClass from\"D:/react-mesto-api-full-gha/frontend/node_modules/@babel/runtime/helpers/esm/createClass.js\";var Api=/*#__PURE__*/function(){function Api(baseUrl){_classCallCheck(this,Api);this._baseUrl=baseUrl;}_createClass(Api,[{key:\"_getResponseData\",value:function _getResponseData(response){if(response.ok){return response.json();}else{return Promise.reject(\"\\u041E\\u0448\\u0438\\u0431\\u043A\\u0430 \".concat(response.status));}}},{key:\"getCards\",value:function getCards(){var _this=this;return fetch(\"\".concat(this._baseUrl,\"/cards\"),{headers:{authorization:\"Bearer \".concat(localStorage.getItem('token')),\"content-type\":'application/json; charset=UTF-8'},credentials:'include'}).then(function(response){return _this._getResponseData(response);});}},{key:\"addCard\",value:function addCard(card){var _this2=this;return fetch(\"\".concat(this._baseUrl,\"/cards\"),{method:'POST',// credentials: 'include',\nheaders:{authorization:\"Bearer \".concat(localStorage.getItem('token')),\"content-type\":'application/json; charset=UTF-8'},body:JSON.stringify({name:card.name,link:card.link})}).then(function(response){return _this2._getResponseData(response);});}},{key:\"getUserInfo\",value:function getUserInfo(){var _this3=this;return fetch(\"\".concat(this._baseUrl,\"/users/me\"),{// credentials: 'include',\nheaders:{authorization:\"Bearer \".concat(localStorage.getItem('token')),\"content-type\":'application/json; charset=UTF-8'}}).then(function(response){return _this3._getResponseData(response);});}},{key:\"editUserInfo\",value:function editUserInfo(userData){var _this4=this;return fetch(\"\".concat(this._baseUrl,\"/users/me\"),{method:\"PATCH\",// credentials: 'include',\nheaders:{authorization:\"Bearer \".concat(localStorage.getItem('token')),\"content-type\":'application/json; charset=UTF-8'},body:JSON.stringify({name:userData.name,about:userData.about})}).then(function(response){return _this4._getResponseData(response);});}},{key:\"deleteCard\",value:function deleteCard(cardId){var _this5=this;console.log(cardId);return fetch(\"\".concat(this._baseUrl,\"/cards/\").concat(cardId),{method:\"DELETE\",// credentials: 'include',\nheaders:{authorization:\"Bearer \".concat(localStorage.getItem('token')),\"content-type\":'application/json; charset=UTF-8'}}).then(function(response){return _this5._getResponseData(response);});}},{key:\"changeLikeCardStatus\",value:function changeLikeCardStatus(cardId,isLiked){var _this6=this;return fetch(\"\".concat(this._baseUrl,\"/cards/\").concat(cardId,\"/likes\"),{method:!isLiked?'PUT':'DELETE',// credentials: 'include',\nheaders:{authorization:\"Bearer \".concat(localStorage.getItem('token')),\"content-type\":'application/json; charset=UTF-8'}}).then(function(response){return _this6._getResponseData(response);});}},{key:\"editAvatar\",value:function editAvatar(data){var _this7=this;return fetch(\"\".concat(this._baseUrl,\"/users/me/avatar\"),{method:\"PATCH\",// credentials: 'include',\nheaders:{authorization:\"Bearer \".concat(localStorage.getItem('token')),\"content-type\":'application/json; charset=UTF-8'},body:JSON.stringify({avatar:data.avatar})}).then(function(response){return _this7._getResponseData(response);});}},{key:\"getInitialInfo\",value:function getInitialInfo(){return Promise.all([this.getUserInfo(),this.getCards()]);}}]);return Api;}();var api=new Api('http://localhost:4000');export default api;","map":{"version":3,"names":["Api","baseUrl","_classCallCheck","_baseUrl","_createClass","key","value","_getResponseData","response","ok","json","Promise","reject","concat","status","getCards","_this","fetch","headers","authorization","localStorage","getItem","credentials","then","addCard","card","_this2","method","body","JSON","stringify","name","link","getUserInfo","_this3","editUserInfo","userData","_this4","about","deleteCard","cardId","_this5","console","log","changeLikeCardStatus","isLiked","_this6","editAvatar","data","_this7","avatar","getInitialInfo","all","api"],"sources":["D:/react-mesto-api-full-gha/frontend/src/utils/api.js"],"sourcesContent":["\r\nclass Api {\r\n    constructor (baseUrl) {\r\n        this._baseUrl = baseUrl;\r\n    }\r\n\r\n    _getResponseData (response) {\r\n        if(response.ok) {\r\n            return response.json()\r\n        } else {\r\n            return Promise.reject(`Ошибка ${response.status}`)\r\n        }\r\n    }\r\n\r\n    getCards () {\r\n        return fetch(`${this._baseUrl}/cards`, {\r\n            headers: {\r\n                authorization: `Bearer ${localStorage.getItem('token')}`,\r\n                \"content-type\": 'application/json; charset=UTF-8'\r\n            },\r\n            credentials: 'include',\r\n        })\r\n        .then(response => {\r\n            return this._getResponseData(response);\r\n        })\r\n    }\r\n\r\n    addCard(card){\r\n        return fetch(`${this._baseUrl}/cards`, {\r\n            method: 'POST',\r\n            // credentials: 'include',\r\n            headers: {\r\n                authorization: `Bearer ${localStorage.getItem('token')}`,\r\n                \"content-type\": 'application/json; charset=UTF-8'\r\n            },\r\n            body: JSON.stringify({\r\n                name: card.name,\r\n                link: card.link\r\n            })\r\n        })\r\n        .then(response => {\r\n            return this._getResponseData(response);\r\n        })\r\n    }\r\n\r\n    getUserInfo() {\r\n        return fetch (`${this._baseUrl}/users/me`, {\r\n            // credentials: 'include',\r\n            headers: {\r\n                authorization: `Bearer ${localStorage.getItem('token')}`,\r\n                \"content-type\": 'application/json; charset=UTF-8'\r\n            },\r\n        })\r\n        .then((response) => {\r\n            return this._getResponseData(response);\r\n        })\r\n    }\r\n\r\n    editUserInfo(userData) {\r\n        return fetch (`${this._baseUrl}/users/me`, {\r\n            method: \"PATCH\",\r\n            // credentials: 'include',\r\n            headers: {\r\n                authorization: `Bearer ${localStorage.getItem('token')}`,\r\n                \"content-type\": 'application/json; charset=UTF-8'\r\n            },\r\n            body: JSON.stringify({\r\n                name: userData.name,\r\n                about: userData.about\r\n            })\r\n        })\r\n        .then(response => {\r\n            return this._getResponseData(response);\r\n        })\r\n    }\r\n\r\n    deleteCard(cardId) {\r\n        console.log(cardId)\r\n        return fetch (`${this._baseUrl}/cards/${cardId}`, {\r\n            method: \"DELETE\",\r\n            // credentials: 'include',\r\n            headers: {\r\n                authorization: `Bearer ${localStorage.getItem('token')}`,\r\n                \"content-type\": 'application/json; charset=UTF-8'\r\n            },\r\n        })\r\n        .then(response => {\r\n            return this._getResponseData(response);\r\n        })\r\n    }\r\n\r\n    changeLikeCardStatus (cardId, isLiked) {\r\n        return fetch(`${this._baseUrl}/cards/${cardId}/likes`, {\r\n            method: !isLiked ? 'PUT' : 'DELETE',\r\n            // credentials: 'include',\r\n            headers: {\r\n                authorization: `Bearer ${localStorage.getItem('token')}`,\r\n                \"content-type\": 'application/json; charset=UTF-8'\r\n            },\r\n        }).then(response => {\r\n            return this._getResponseData(response);\r\n        })\r\n    }\r\n\r\n    editAvatar (data) {\r\n        return fetch(`${this._baseUrl}/users/me/avatar`, {\r\n            method: \"PATCH\",\r\n            // credentials: 'include',\r\n            headers: {\r\n                authorization: `Bearer ${localStorage.getItem('token')}`,\r\n                \"content-type\": 'application/json; charset=UTF-8'\r\n            },\r\n            body: JSON.stringify({\r\n                avatar: data.avatar\r\n            })\r\n        })\r\n        .then(response => {\r\n            return this._getResponseData(response);\r\n        })\r\n    }\r\n\r\n    getInitialInfo() {\r\n        return Promise.all([this.getUserInfo(), this.getCards()]);\r\n    }\r\n}\r\n\r\n\r\nconst api = new Api('http://localhost:4000');\r\n\r\nexport default api;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}
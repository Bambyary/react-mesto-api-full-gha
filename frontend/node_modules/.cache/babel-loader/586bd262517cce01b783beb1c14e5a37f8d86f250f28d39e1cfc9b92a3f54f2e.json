{"ast":null,"code":"import _slicedToArray from\"D:/react-mesto-api-full-gha/frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React from\"react\";import FormRegistration from\"../FormRegistration/FormRegistration\";import Header from\"../Header/Header\";import{useNavigate}from'react-router-dom';import*as auth from'../../utils/auth';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";function Register(props){var _React$useState=React.useState(''),_React$useState2=_slicedToArray(_React$useState,2),email=_React$useState2[0],setEmail=_React$useState2[1];var _React$useState3=React.useState(''),_React$useState4=_slicedToArray(_React$useState3,2),password=_React$useState4[0],setPassword=_React$useState4[1];var _React$useState5=React.useState({emailValid:false,passwordValid:false}),_React$useState6=_slicedToArray(_React$useState5,2),formValidity=_React$useState6[0],setFormValidity=_React$useState6[1];var emailValidity=formValidity.emailValid;var passwordValidity=formValidity.passwordValid;var formValid=emailValidity===true&&passwordValidity===true;var _React$useState7=React.useState(''),_React$useState8=_slicedToArray(_React$useState7,2),emailError=_React$useState8[0],setEmailError=_React$useState8[1];var _React$useState9=React.useState(''),_React$useState10=_slicedToArray(_React$useState9,2),passwordError=_React$useState10[0],setPasswordError=_React$useState10[1];var _React$useState11=React.useState(false),_React$useState12=_slicedToArray(_React$useState11,2),isFocused=_React$useState12[0],setIsFocused=_React$useState12[1];var navigate=useNavigate();React.useEffect(function(){setEmail('');setPassword('');},[]);React.useEffect(function(){var isEmailValid=email!==undefined&&/^\\w+([\\.-]?\\w+)*@\\w+([\\.-]?\\w+)*(\\.\\w{2,3})+$/.test(email);var isPasswordValid=password!==undefined&&password.length>8;setEmailError(function(){if(!isFocused){return setEmailError('');}else if(email===''){return'Введите email';}else if(email!==''&&!isEmailValid){return'Введён некорректный email';}});setPasswordError(function(){if(!isFocused){return setPasswordError('');}else if(password===''){return'Введите пароль';}else if(password!==''&&!isPasswordValid){return'Пароль должен содержать латинские символы верхнего и нижнего регистра и хотя бы одну цифру';}});setFormValidity({emailValid:isEmailValid,passwordValid:isPasswordValid});},[email,password,setFormValidity,setIsFocused]);function handleEmailChange(e){setEmail(e.target.value);}function handlePasswordChange(e){setPassword(e.target.value);}function handleFocus(){setIsFocused(true);}function handleBlur(){setIsFocused(false);}function handleSubmit(e){e.preventDefault();auth.register(email,password).then(function(res){if(res!==undefined){props.handleRegister();props.handleSuccess(true);navigate('/sign-in',{replace:true});}else{props.handleRegister();props.handleSuccess(false);}}).catch(function(e){console.log(e);});}return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Header,{buttonText:\"\\u0412\\u043E\\u0439\\u0442\\u0438\",path:\"/sign-in\"}),/*#__PURE__*/_jsxs(FormRegistration,{name:\"form-register\",title:\"\\u0420\\u0435\\u0433\\u0438\\u0441\\u0442\\u0440\\u0430\\u0446\\u0438\\u044F\",textButton:\"\\u0417\\u0430\\u0440\\u0435\\u0433\\u0438\\u0441\\u0442\\u0440\\u0438\\u0440\\u043E\\u0432\\u0430\\u0442\\u044C\\u0441\\u044F\",textLink:\"\\u0423\\u0436\\u0435 \\u0437\\u0430\\u0440\\u0435\\u0433\\u0438\\u0441\\u0442\\u0440\\u0438\\u0440\\u043E\\u0432\\u0430\\u043D\\u044B? \\u0412\\u043E\\u0439\\u0442\\u0438\",handleSubmit:handleSubmit,isFormValid:formValid,children:[/*#__PURE__*/_jsxs(\"label\",{htmlFor:\"registration__input-email\",children:[/*#__PURE__*/_jsx(\"input\",{onChange:handleEmailChange,onFocus:handleFocus,onBlur:handleBlur,className:\"registration__input \".concat(!emailValidity&&isFocused&&'registration__input_type_error'),id:\"registration__input-email\",minLength:\"2\",maxLength:\"30\",name:\"email\",type:\"text\",placeholder:\"Email\",value:email||'',required:true}),/*#__PURE__*/_jsx(\"span\",{className:\"registration__input-error \".concat(!emailValidity&&'registration__input-error_active'),children:emailError})]}),/*#__PURE__*/_jsxs(\"label\",{htmlFor:\"registration__input-password\",children:[/*#__PURE__*/_jsx(\"input\",{onChange:handlePasswordChange,onFocus:handleFocus,onBlur:handleBlur,className:\"registration__input \".concat(!passwordValidity&&isFocused&&'registration__input_type_error'),id:\"registration__input-password\",name:\"password\",type:\"password\",placeholder:\"\\u041F\\u0430\\u0440\\u043E\\u043B\\u044C\",value:password||'',required:true}),/*#__PURE__*/_jsx(\"span\",{className:\"registration__input-error \".concat(!passwordValidity&&'registration__input-error_active'),children:passwordError})]})]})]});}export default Register;","map":{"version":3,"names":["React","FormRegistration","Header","useNavigate","auth","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","Register","props","_React$useState","useState","_React$useState2","_slicedToArray","email","setEmail","_React$useState3","_React$useState4","password","setPassword","_React$useState5","emailValid","passwordValid","_React$useState6","formValidity","setFormValidity","emailValidity","passwordValidity","formValid","_React$useState7","_React$useState8","emailError","setEmailError","_React$useState9","_React$useState10","passwordError","setPasswordError","_React$useState11","_React$useState12","isFocused","setIsFocused","navigate","useEffect","isEmailValid","undefined","test","isPasswordValid","length","handleEmailChange","e","target","value","handlePasswordChange","handleFocus","handleBlur","handleSubmit","preventDefault","register","then","res","handleRegister","handleSuccess","replace","catch","console","log","children","buttonText","path","name","title","textButton","textLink","isFormValid","htmlFor","onChange","onFocus","onBlur","className","concat","id","minLength","maxLength","type","placeholder","required"],"sources":["D:/react-mesto-api-full-gha/frontend/src/components/Register/Register.js"],"sourcesContent":["import React from \"react\";\r\nimport FormRegistration from \"../FormRegistration/FormRegistration\";\r\nimport Header from \"../Header/Header\";\r\nimport {useNavigate} from 'react-router-dom';\r\nimport * as auth from '../../utils/auth';\r\n\r\nfunction Register (props) {\r\n    const [email, setEmail] = React.useState('');\r\n    const [password, setPassword] = React.useState('');\r\n    const [formValidity, setFormValidity] = React.useState({\r\n        emailValid: false,\r\n        passwordValid: false\r\n    })\r\n    const emailValidity = formValidity.emailValid;\r\n    const passwordValidity = formValidity.passwordValid;\r\n    const formValid = emailValidity === true && passwordValidity === true;\r\n    const [emailError, setEmailError] = React.useState('');\r\n    const [passwordError, setPasswordError] = React.useState('');\r\n    const [isFocused, setIsFocused] = React.useState(false);\r\n    const navigate = useNavigate();\r\n\r\n    React.useEffect(() => {\r\n        setEmail('');\r\n        setPassword('');\r\n    }, [])\r\n\r\n    React.useEffect(() => {\r\n        const isEmailValid = email !== undefined && /^\\w+([\\.-]?\\w+)*@\\w+([\\.-]?\\w+)*(\\.\\w{2,3})+$/.test(email);\r\n        const isPasswordValid = password !== undefined && password.length > 8;\r\n\r\n        setEmailError(() => {\r\n            if(!isFocused) {\r\n                return setEmailError('');\r\n            } else if (email === '') {\r\n                return 'Введите email'\r\n            } else if (email !== '' && !isEmailValid) {\r\n                return 'Введён некорректный email'\r\n            }\r\n        })\r\n\r\n        setPasswordError(() => {\r\n            if (!isFocused) {\r\n                return setPasswordError('');\r\n            } else if (password === '') {\r\n                return 'Введите пароль'\r\n            } else if (password !== '' && !isPasswordValid) {\r\n                return 'Пароль должен содержать латинские символы верхнего и нижнего регистра и хотя бы одну цифру'\r\n            }\r\n        })\r\n\r\n        setFormValidity({\r\n            emailValid: isEmailValid,\r\n            passwordValid: isPasswordValid\r\n        })\r\n    }, [email, password, setFormValidity, setIsFocused])\r\n\r\n    function handleEmailChange (e) {\r\n        setEmail(e.target.value); \r\n    }\r\n\r\n    function handlePasswordChange (e) {\r\n        setPassword(e.target.value);\r\n    }\r\n\r\n    function handleFocus () {\r\n        setIsFocused(true);\r\n    }\r\n\r\n    function handleBlur () {\r\n        setIsFocused(false);\r\n    }\r\n\r\n    function handleSubmit (e) {\r\n        e.preventDefault();\r\n\r\n        auth.register(email, password).then((res) => {\r\n            if (res !== undefined) {\r\n                props.handleRegister();\r\n                props.handleSuccess(true);\r\n                navigate('/sign-in', {replace: true})\r\n            } else {\r\n                props.handleRegister();\r\n                props.handleSuccess(false);\r\n            }\r\n        }).catch(e => {\r\n            console.log(e)\r\n        })\r\n    }\r\n\r\n    return (\r\n        <>\r\n            <Header buttonText='Войти' path='/sign-in' />\r\n            <FormRegistration name='form-register' title='Регистрация' textButton='Зарегистрироваться' textLink='Уже зарегистрированы? Войти' \r\n                handleSubmit={handleSubmit}\r\n                isFormValid={formValid}>\r\n            <label htmlFor=\"registration__input-email\">\r\n                <input \r\n                onChange={handleEmailChange} \r\n                onFocus={handleFocus}\r\n                onBlur={handleBlur}\r\n                className={`registration__input ${!emailValidity && isFocused && 'registration__input_type_error'}`} \r\n                id=\"registration__input-email\" \r\n                minLength=\"2\" maxLength=\"30\" \r\n                name=\"email\" type=\"text\" placeholder=\"Email\" \r\n                value={email || ''} \r\n                required />\r\n                <span className={`registration__input-error ${!emailValidity && 'registration__input-error_active'}`}>{emailError}</span>\r\n            </label>\r\n            <label htmlFor=\"registration__input-password\">\r\n                <input\r\n                onChange={handlePasswordChange} \r\n                onFocus={handleFocus}\r\n                onBlur={handleBlur}\r\n                className={`registration__input ${!passwordValidity && isFocused && 'registration__input_type_error'}`} \r\n                id=\"registration__input-password\" \r\n                name=\"password\" type=\"password\" placeholder=\"Пароль\" \r\n                value={password || ''} \r\n                required />\r\n                <span className={`registration__input-error ${!passwordValidity && 'registration__input-error_active'}`}>{passwordError}</span>\r\n            </label>\r\n            </FormRegistration>\r\n        </>\r\n        \r\n    )\r\n}\r\n\r\nexport default Register;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}
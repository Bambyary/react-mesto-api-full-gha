{"ast":null,"code":"import _slicedToArray from\"D:/react-mesto-api-full-gha/frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React from\"react\";import PopupWithForm from\"../PopupWithForm/PopupWithForm\";import{CurrentUserContext}from'../../contexts/CurrentUserContext';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function EditProfilePopup(props){var _React$useState=React.useState(''),_React$useState2=_slicedToArray(_React$useState,2),name=_React$useState2[0],setName=_React$useState2[1];var _React$useState3=React.useState(''),_React$useState4=_slicedToArray(_React$useState3,2),description=_React$useState4[0],setDescription=_React$useState4[1];var currentUser=React.useContext(CurrentUserContext);var _React$useState5=React.useState({userNameValid:true,descriptionValid:true}),_React$useState6=_slicedToArray(_React$useState5,2),formValidity=_React$useState6[0],setFormValidity=_React$useState6[1];var userValidity=formValidity.userNameValid;var descriptionValidity=formValidity.descriptionValid;var formValid=userValidity===true&&descriptionValidity===true;var _React$useState7=React.useState(null),_React$useState8=_slicedToArray(_React$useState7,2),nameError=_React$useState8[0],setNameError=_React$useState8[1];var _React$useState9=React.useState(null),_React$useState10=_slicedToArray(_React$useState9,2),descriptionError=_React$useState10[0],setDescriptionError=_React$useState10[1];var _React$useState11=React.useState(false),_React$useState12=_slicedToArray(_React$useState11,2),isFocused=_React$useState12[0],setIsFocused=_React$useState12[1];React.useEffect(function(){setName(currentUser.name);setDescription(currentUser.about);},[currentUser,props.isOpen]);React.useEffect(function(){var isUserNameValid=name!==undefined&&name.length>1;var isDescriptionValid=description!==undefined&&description.length>1;setNameError(function(){if(!isFocused){return setNameError('');}else if(name===''){return'Введите имя';}else if(name!==''&&!isUserNameValid){return'Строка должна содержать не менее 2 символов';}});setDescriptionError(function(){if(!isFocused){return setDescriptionError('');}else if(description===''){return'Введите описание';}else if(description!==''&&!isDescriptionValid){return'Строка должна содержать не менее 2 символов';}});setFormValidity(function(){return{userNameValid:isUserNameValid,descriptionValid:isDescriptionValid};});},[name,description,setFormValidity,setIsFocused]);function handleNameChange(e){setName(e.target.value);}function handleDescriptionChange(e){setDescription(e.target.value);}function handleSubmit(e){e.preventDefault();props.onUpdateUser({name:name,about:description});}function handleFocus(){setIsFocused(true);}function handleBlur(){setIsFocused(false);}return/*#__PURE__*/_jsxs(PopupWithForm,{name:\"form-profile\",title:\"\\u0420\\u0435\\u0434\\u0430\\u043A\\u0442\\u0438\\u0440\\u043E\\u0432\\u0430\\u0442\\u044C \\u043F\\u0440\\u043E\\u0444\\u0438\\u043B\\u044C\",textButton:props.isLoading?'Сохранение...':'Сохранить',isOpen:props.isOpen,onClose:props.onClose,handleSubmit:handleSubmit,isFormValid:formValid,children:[/*#__PURE__*/_jsxs(\"label\",{htmlFor:\"popup__input-name\",children:[/*#__PURE__*/_jsx(\"input\",{onChange:handleNameChange,onFocus:handleFocus,onBlur:handleBlur,className:\"popup__input popup__input_type_name \".concat(!userValidity&&isFocused&&'popup__input_type_error'),id:\"popup__input-name\",minLength:\"2\",maxLength:\"40\",name:\"name\",type:\"text\",placeholder:\"\\u0418\\u043C\\u044F\",value:name||'',required:true}),/*#__PURE__*/_jsx(\"span\",{className:\"popup__input-error popup__input-name-error \".concat(!userValidity&&'popup__input-error_active'),children:nameError})]}),/*#__PURE__*/_jsxs(\"label\",{htmlFor:\"popup__input-profession\",children:[/*#__PURE__*/_jsx(\"input\",{onChange:handleDescriptionChange,onFocus:handleFocus,onBlur:handleBlur,className:\"popup__input popup__input_type_profession \".concat(!descriptionValidity&&isFocused&&'popup__input_type_error'),id:\"popup__input-profession\",minLength:\"2\",maxLength:\"200\",name:\"about\",type:\"text\",placeholder:\"\\u0412\\u0438\\u0434 \\u0434\\u0435\\u044F\\u0442\\u0435\\u043B\\u044C\\u043D\\u043E\\u0441\\u0442\\u0438\",value:description||'',required:true}),/*#__PURE__*/_jsx(\"span\",{className:\"popup__input-error popup__input-profession-error \".concat(!descriptionValidity&&'popup__input-error_active'),children:descriptionError})]})]});}export default EditProfilePopup;","map":{"version":3,"names":["React","PopupWithForm","CurrentUserContext","jsx","_jsx","jsxs","_jsxs","EditProfilePopup","props","_React$useState","useState","_React$useState2","_slicedToArray","name","setName","_React$useState3","_React$useState4","description","setDescription","currentUser","useContext","_React$useState5","userNameValid","descriptionValid","_React$useState6","formValidity","setFormValidity","userValidity","descriptionValidity","formValid","_React$useState7","_React$useState8","nameError","setNameError","_React$useState9","_React$useState10","descriptionError","setDescriptionError","_React$useState11","_React$useState12","isFocused","setIsFocused","useEffect","about","isOpen","isUserNameValid","undefined","length","isDescriptionValid","handleNameChange","e","target","value","handleDescriptionChange","handleSubmit","preventDefault","onUpdateUser","handleFocus","handleBlur","title","textButton","isLoading","onClose","isFormValid","children","htmlFor","onChange","onFocus","onBlur","className","concat","id","minLength","maxLength","type","placeholder","required"],"sources":["D:/react-mesto-api-full-gha/frontend/src/components/EditProfilePopup/EditProfilePopup.js"],"sourcesContent":["import React from \"react\";\r\nimport PopupWithForm from \"../PopupWithForm/PopupWithForm\";\r\nimport {CurrentUserContext} from '../../contexts/CurrentUserContext';\r\n\r\nfunction EditProfilePopup (props) {\r\n\r\n    const [name, setName] = React.useState('');\r\n    const [description, setDescription] = React.useState('');\r\n    const currentUser = React.useContext(CurrentUserContext);\r\n    const [formValidity, setFormValidity] = React.useState({\r\n        userNameValid: true,\r\n        descriptionValid: true\r\n    })\r\n    const userValidity = formValidity.userNameValid;\r\n    const descriptionValidity = formValidity.descriptionValid\r\n    const formValid = userValidity === true && descriptionValidity === true;\r\n    const [nameError, setNameError] = React.useState(null);\r\n    const [descriptionError, setDescriptionError] = React.useState(null);\r\n    const [isFocused, setIsFocused] = React.useState(false);\r\n\r\n    React.useEffect(() => {\r\n        setName(currentUser.name);\r\n        setDescription(currentUser.about);\r\n    }, [currentUser, props.isOpen])\r\n\r\n    React.useEffect(() => {\r\n        const isUserNameValid = name !== undefined && name.length > 1;\r\n        const isDescriptionValid = description !== undefined && description.length > 1;\r\n\r\n        setNameError(() => {\r\n            if (!isFocused) {\r\n                return setNameError('');\r\n            }else if (name === '') {\r\n                return 'Введите имя'\r\n            } else if (name !== '' && !isUserNameValid) {\r\n                return 'Строка должна содержать не менее 2 символов'\r\n            }\r\n        })\r\n\r\n        setDescriptionError(() => {\r\n            if (!isFocused) {\r\n                return setDescriptionError('');\r\n            } else if (description === '') {\r\n                return 'Введите описание'\r\n            } else if (description !== '' && !isDescriptionValid) {\r\n                return 'Строка должна содержать не менее 2 символов'\r\n            }\r\n        })\r\n\r\n        setFormValidity(() => ({\r\n            userNameValid: isUserNameValid,\r\n            descriptionValid: isDescriptionValid\r\n        }))\r\n    }, [name, description, setFormValidity, setIsFocused])\r\n\r\n\r\n    function handleNameChange (e) {\r\n        setName(e.target.value);\r\n    }\r\n\r\n    function handleDescriptionChange (e) {\r\n        setDescription(e.target.value);\r\n    }\r\n\r\n    function handleSubmit (e) {\r\n        \r\n        e.preventDefault();\r\n       \r\n        props.onUpdateUser({\r\n            name,\r\n            about: description\r\n        })\r\n\r\n    }\r\n\r\n    function handleFocus () {\r\n        setIsFocused(true);\r\n    }\r\n\r\n    function handleBlur () {\r\n        setIsFocused(false);\r\n    }\r\n\r\n    return (\r\n        <PopupWithForm name='form-profile' title='Редактировать профиль' textButton={props.isLoading ? 'Сохранение...' : 'Сохранить'} \r\n            isOpen={props.isOpen} onClose={props.onClose} handleSubmit={handleSubmit} isFormValid={formValid}>\r\n            <label htmlFor=\"popup__input-name\">\r\n                <input \r\n                onChange={handleNameChange} \r\n                onFocus={handleFocus}\r\n                onBlur={handleBlur}\r\n                className={`popup__input popup__input_type_name ${!userValidity && isFocused && 'popup__input_type_error'}`} \r\n                id=\"popup__input-name\" \r\n                minLength=\"2\" maxLength=\"40\" \r\n                name=\"name\" type=\"text\" placeholder=\"Имя\" \r\n                value={name || ''}\r\n                required />\r\n                <span className={`popup__input-error popup__input-name-error ${!userValidity && 'popup__input-error_active'}`}>{nameError}</span>\r\n            </label>\r\n            <label htmlFor=\"popup__input-profession\">\r\n                <input \r\n                onChange={handleDescriptionChange} \r\n                onFocus={handleFocus}\r\n                onBlur={handleBlur}\r\n                className={`popup__input popup__input_type_profession ${!descriptionValidity && isFocused && 'popup__input_type_error'}`} \r\n                id=\"popup__input-profession\" \r\n                minLength=\"2\" maxLength=\"200\" \r\n                name=\"about\" type=\"text\" placeholder=\"Вид деятельности\" \r\n                value={description || ''} \r\n                required />\r\n                <span className={`popup__input-error popup__input-profession-error ${!descriptionValidity && 'popup__input-error_active'}`}>{descriptionError}</span>\r\n            </label>\r\n        </PopupWithForm> \r\n    );\r\n}\r\n\r\nexport default EditProfilePopup;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}
{"ast":null,"code":"import _slicedToArray from\"D:/react-mesto-api-full-gha/frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React from\"react\";import PopupWithForm from\"../PopupWithForm/PopupWithForm\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function AddPlacePopup(props){var _React$useState=React.useState(''),_React$useState2=_slicedToArray(_React$useState,2),title=_React$useState2[0],setTitle=_React$useState2[1];var _React$useState3=React.useState(''),_React$useState4=_slicedToArray(_React$useState3,2),link=_React$useState4[0],setLink=_React$useState4[1];var _React$useState5=React.useState({titleValid:false,linkValid:false}),_React$useState6=_slicedToArray(_React$useState5,2),formValidity=_React$useState6[0],setFormValidity=_React$useState6[1];var titleValidity=formValidity.titleValid;var linkValidity=formValidity.linkValid;var formValid=titleValidity===true&&linkValidity===true;var _React$useState7=React.useState(''),_React$useState8=_slicedToArray(_React$useState7,2),titleError=_React$useState8[0],setTitleError=_React$useState8[1];var _React$useState9=React.useState(''),_React$useState10=_slicedToArray(_React$useState9,2),linkError=_React$useState10[0],setLinkError=_React$useState10[1];var _React$useState11=React.useState(false),_React$useState12=_slicedToArray(_React$useState11,2),isFocused=_React$useState12[0],setIsFocused=_React$useState12[1];React.useEffect(function(){setTitle('');setLink('');setIsFocused(false);},[props.isOpen]);React.useEffect(function(){var isTitleValid=title!==undefined&&title.length>1&&title.length<30;var httpRegex=/^https?:\\/\\/(?:www\\.)?[-a-zA-Z0-9@:%._\\+~#=]{1,256}\\.[a-zA-Z0-9()]{1,6}\\b(?:[-a-zA-Z0-9()@:%_\\+.~#?&\\/=]*)$/;var isLinkValid=link!==undefined&&httpRegex.test(link);setTitleError(function(){if(!isFocused){return setTitleError('');}else if(title===''){return'Введите название';}else if(title!==''&&!isTitleValid){return'Строка должна содержать не менее 2 символов и не более 30 символов';}});setLinkError(function(){if(!isFocused){return setLinkError('');}else if(link===''){return'Введите ссылку на картинку';}else if(link!==''&&!isLinkValid){return'Введена некорректная ссылка';}});setFormValidity(function(){return{titleValid:isTitleValid,linkValid:isLinkValid};});},[title,link,setFormValidity,setIsFocused]);var handleTitleChange=function handleTitleChange(e){setTitle(e.target.value);};var handleLinkValue=function handleLinkValue(e){setLink(e.target.value);};function handleSubmit(e){e.preventDefault();props.onAddPlace({name:title,link:link});}function handleFocus(){setIsFocused(true);}function handleBlur(){setIsFocused(false);}return/*#__PURE__*/_jsxs(PopupWithForm,{name:\"form-add-photo\",title:\"\\u041D\\u043E\\u0432\\u043E\\u0435 \\u043C\\u0435\\u0441\\u0442\\u043E\",textButton:props.isLoading?'Сохранение...':'Создать',isOpen:props.isOpen,onClose:props.onClose,handleSubmit:handleSubmit,isFormValid:formValid,children:[/*#__PURE__*/_jsxs(\"label\",{htmlFor:\"popup__input-title-pictire\",children:[/*#__PURE__*/_jsx(\"input\",{onChange:handleTitleChange,onFocus:handleFocus,onBlur:handleBlur,className:\"popup__input popup__input_type_title \".concat(!titleValidity&&isFocused&&'popup__input_type_error'),id:\"popup__input-title-pictire\",minLength:\"2\",maxLength:\"30\",name:\"title\",type:\"text\",placeholder:\"\\u041D\\u0430\\u0437\\u0432\\u0430\\u043D\\u0438\\u0435\",value:title||'',required:true}),/*#__PURE__*/_jsx(\"span\",{className:\"popup__input-error popup__input-title-pictire-error \".concat(!titleValidity&&'popup__input-error_active'),children:titleError})]}),/*#__PURE__*/_jsxs(\"label\",{htmlFor:\"popup__input-link\",children:[/*#__PURE__*/_jsx(\"input\",{onChange:handleLinkValue,className:\"popup__input popup__input_type_link \".concat(!linkValidity&&isFocused&&'popup__input_type_error'),id:\"popup__input-link\",name:\"link\",type:\"url\",placeholder:\"\\u0421\\u0441\\u044B\\u043B\\u043A\\u0430 \\u043D\\u0430 \\u043A\\u0430\\u0440\\u0442\\u0438\\u043D\\u043A\\u0443\",value:link||'',required:true}),/*#__PURE__*/_jsx(\"span\",{className:\"popup__input-error popup__input-link-error \".concat(!linkValidity&&'popup__input-error_active'),children:linkError})]})]});}export default AddPlacePopup;","map":{"version":3,"names":["React","PopupWithForm","jsx","_jsx","jsxs","_jsxs","AddPlacePopup","props","_React$useState","useState","_React$useState2","_slicedToArray","title","setTitle","_React$useState3","_React$useState4","link","setLink","_React$useState5","titleValid","linkValid","_React$useState6","formValidity","setFormValidity","titleValidity","linkValidity","formValid","_React$useState7","_React$useState8","titleError","setTitleError","_React$useState9","_React$useState10","linkError","setLinkError","_React$useState11","_React$useState12","isFocused","setIsFocused","useEffect","isOpen","isTitleValid","undefined","length","httpRegex","isLinkValid","test","handleTitleChange","e","target","value","handleLinkValue","handleSubmit","preventDefault","onAddPlace","name","handleFocus","handleBlur","textButton","isLoading","onClose","isFormValid","children","htmlFor","onChange","onFocus","onBlur","className","concat","id","minLength","maxLength","type","placeholder","required"],"sources":["D:/react-mesto-api-full-gha/frontend/src/components/AddPlacePopup/AddPlacePopup.js"],"sourcesContent":["import React from \"react\";\r\nimport PopupWithForm from \"../PopupWithForm/PopupWithForm\";\r\n\r\nfunction AddPlacePopup (props) {\r\n\r\n    const [title, setTitle] = React.useState('');\r\n    const [link, setLink] = React.useState('');\r\n    const [formValidity, setFormValidity] = React.useState({\r\n        titleValid: false,\r\n        linkValid: false\r\n    })\r\n    const titleValidity = formValidity.titleValid;\r\n    const linkValidity = formValidity.linkValid;\r\n    const formValid = titleValidity === true && linkValidity === true;\r\n    const [titleError, setTitleError] = React.useState('');\r\n    const [linkError, setLinkError] = React.useState('');\r\n    const [isFocused, setIsFocused] = React.useState(false);\r\n\r\n    React.useEffect(() => {\r\n        setTitle('');\r\n        setLink('');\r\n        setIsFocused(false);\r\n    }, [props.isOpen])\r\n\r\n    React.useEffect (() => {\r\n        const isTitleValid = title !== undefined && (title.length > 1 && title.length < 30);\r\n\r\n        const httpRegex = /^https?:\\/\\/(?:www\\.)?[-a-zA-Z0-9@:%._\\+~#=]{1,256}\\.[a-zA-Z0-9()]{1,6}\\b(?:[-a-zA-Z0-9()@:%_\\+.~#?&\\/=]*)$/;\r\n        const isLinkValid = link !== undefined && httpRegex.test(link);\r\n        \r\n\r\n        setTitleError(() => {\r\n            if (!isFocused) {\r\n                return setTitleError('');\r\n            } else if (title === '') {\r\n                return 'Введите название'\r\n            } else if (title !== '' && !isTitleValid) {\r\n                return 'Строка должна содержать не менее 2 символов и не более 30 символов'\r\n            }\r\n        })\r\n\r\n        setLinkError(() => {\r\n            if (!isFocused) {\r\n                return setLinkError('');\r\n            } else if (link === '') {\r\n                return 'Введите ссылку на картинку'\r\n            } else if (link !== '' && !isLinkValid) {\r\n                return 'Введена некорректная ссылка'\r\n            }\r\n        })\r\n\r\n        setFormValidity(() => ({\r\n            titleValid: isTitleValid,\r\n            linkValid: isLinkValid\r\n        }))\r\n    }, [title, link, setFormValidity, setIsFocused])\r\n\r\n    const handleTitleChange = (e) => {\r\n        setTitle(e.target.value);\r\n    }\r\n\r\n    const handleLinkValue = (e) => {\r\n        setLink(e.target.value);\r\n    }\r\n\r\n    function handleSubmit (e) {\r\n        e.preventDefault();\r\n        \r\n        props.onAddPlace({\r\n            name: title,\r\n            link\r\n        })\r\n        \r\n    }\r\n\r\n    function handleFocus () {\r\n        setIsFocused(true);\r\n    }\r\n\r\n    function handleBlur () {\r\n        setIsFocused(false);\r\n    }\r\n\r\n    return (\r\n        <PopupWithForm name='form-add-photo' title='Новое место' textButton={props.isLoading ? 'Сохранение...' : 'Создать'} \r\n        isOpen={props.isOpen} onClose={props.onClose} handleSubmit={handleSubmit} isFormValid={formValid}>\r\n                        <label htmlFor=\"popup__input-title-pictire\">\r\n                            <input \r\n                            onChange={handleTitleChange}\r\n                            onFocus={handleFocus}\r\n                            onBlur={handleBlur} \r\n                            className={`popup__input popup__input_type_title ${!titleValidity && isFocused && 'popup__input_type_error'}`} \r\n                            id=\"popup__input-title-pictire\" \r\n                            minLength=\"2\" maxLength=\"30\" \r\n                            name=\"title\" type=\"text\" placeholder=\"Название\" \r\n                            value={title || ''} \r\n                            required />\r\n                            <span className={`popup__input-error popup__input-title-pictire-error ${!titleValidity && 'popup__input-error_active'}`}>{titleError}</span>\r\n                        </label>\r\n                        <label htmlFor=\"popup__input-link\">\r\n                            <input\r\n                            onChange={handleLinkValue} \r\n                            className={`popup__input popup__input_type_link ${!linkValidity && isFocused && 'popup__input_type_error'}`} \r\n                            id=\"popup__input-link\" \r\n                            name=\"link\" type=\"url\" placeholder=\"Ссылка на картинку\" \r\n                            value={link || ''} \r\n                            required />\r\n                            <span className={`popup__input-error popup__input-link-error ${!linkValidity && 'popup__input-error_active'}`}>{linkError}</span>\r\n                        </label>\r\n        </PopupWithForm>\r\n    )\r\n} \r\n\r\nexport default AddPlacePopup;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}